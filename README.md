#### Сервисы

**1. PostgreSQL**
- База данных для хранения метаданных Airflow и данных, полученных из FastAPI.
- Настройки пользователя, пароля и имени базы данных передаются через переменные окружения из `.env` файла.
- Данные сохраняются в томе `postgres_data`, чтобы не теряться при перезапуске контейнера (том именованный, описан в конце `docker-compose` файла)
- Сервис подключён к сети `general_network`.

**2. data-service**
- Небольшое приложение на FastAPI, которое предоставляет данные через API.
- Запускается из папки `./data_service` и подключается к сети `general_network`.
- Проброшен порт 8000 для доступа к сервису.
- Завиcит от сервиса PostgreSQL, чтобы убедиться, что база данных доступна при старте.

**3. Airflow**
- Airflow обращается к data-service для получения данных и сохраняет их в PostgreSQL.
- Все ключевые настройки передаются через переменные окружения.
- Для работы с DAG'ами и логами используются тома, монтируемые из папки `./airflow`.
- Также подключён к сети `general_network`.
- Проброшен порт 8080 для доступа к веб-интерфейсу.


#### Зависимости
- Сервис `data-service` ожидает старта PostgreSQL перед началом своей работы.
- Airflow зависит от PostgreSQL и Data-Service, чтобы корректно выполнять свои задачи.

#### Ответы на вопросы
**Можно ли ограничивать ресурсы для сервисов в docker-compose.yml?**

Да, можно. Для этого в docker-compose.yml есть специальная секция deploy.resources. Там можно указать ограничения по памяти и процессорным ресурсам. Эта штука работает только в Docker Swarm.

**Как можно запустить только определённый сервис из docker-compose.yml, не запуская остальные?**

Чтобы запустить конкретный сервис, можно исопльзовать команду (пример на постгрес):

```bash
docker-compose up postgres
```

В таком случае сеть и тома автоматически создаются, если надо. Это удобно для тестов.